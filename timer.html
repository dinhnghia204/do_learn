<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nh·∫Øc nh·ªü &amp; H·∫πn gi·ªù</title>
  <link rel="stylesheet" href="asset/timer.css">
</head>
<body>

  <header>
    <div class="header-center">
      <h1>DoLearn - Nh·∫Øc nh·ªü &amp; H·∫πn gi·ªù</h1>
      <nav class="navbar">
        <ul>
          <li><a href="flashcards.html">Flashcards</a></li>
          <li><a href="timer.html" class="active">Nh·∫Øc nh·ªü &amp; H·∫πn gi·ªù</a></li>
          <li><a href="todolist.html">To-do List</a></li>
        </ul>
      </nav>
    </div>
  </header>
  <div class="container">
    <!-- Ph·∫ßn Nh·∫Øc nh·ªü -->
    <div class="card">
      <h2>Nh·∫Øc nh·ªü</h2>
      <label for="reminder-text">N·ªôi dung:</label>
      <input type="text" id="reminder-text" placeholder="Vi·∫øt g√¨ ƒë√≥..."/>
      <label for="reminder-time">Th·ªùi gian (HH:MM):</label>
      <input type="time" id="reminder-time"/>
      <button id="add-reminder">Th√™m nh·∫Øc nh·ªü</button>

      <h3>Danh s√°ch nh·∫Øc nh·ªü:</h3>
      <ul id="reminder-list"></ul>
    </div>

    <!-- Ph·∫ßn H·∫πn gi·ªù -->
    <div class="card">
      <h2>H·∫πn gi·ªù (Timer)</h2>
      <div class="timer-display" id="timer-display">00:00:00</div>
      <div class="btn-group">
        <button id="start-timer">Start</button>
        <button id="pause-timer">Pause</button>
        <button id="reset-timer">Reset</button>
      </div>
    </div>
  </div>

  <script>
    // --- M√£ cho ph·∫ßn Nh·∫Øc nh·ªü ---
    const REMINDER_KEY = 'dolearn_reminders';
    const remText = document.getElementById('reminder-text');
    const remTime = document.getElementById('reminder-time');
    const addBtn = document.getElementById('add-reminder');
    const remList = document.getElementById('reminder-list');
    let reminders = [];

    function saveReminders() {
      localStorage.setItem(REMINDER_KEY, JSON.stringify(reminders));
    }
    function loadReminders() {
      const data = localStorage.getItem(REMINDER_KEY);
      reminders = data ? JSON.parse(data) : [];
    }

    function renderReminders() {
      remList.innerHTML = '';
      reminders.sort((a,b) => a.time.localeCompare(b.time));
      reminders.forEach(r => {
        const div = document.createElement('div');
        div.className = 'reminder-card';
        div.innerHTML = `
          <span style="color:#222;font-size:1em;">${r.time} ‚Äî ${r.text}</span>
          <button data-id="${r.id}">X√≥a</button>
        `;
        remList.appendChild(div);
      });
    }

    addBtn.addEventListener('click', () => {
      const text = remText.value.trim();
      const time = remTime.value;
      if (!text || !time) return alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß!');
      const id = Date.now();
      reminders.push({ id, text, time });
      saveReminders();
      renderReminders();
      remText.value = '';
      remTime.value = '';
    });

    remList.addEventListener('click', e => {
      if (e.target.tagName === 'BUTTON') {
        const id = +e.target.dataset.id;
        reminders = reminders.filter(r => r.id !== id);
        saveReminders();
        renderReminders();
      }
    });

    // T·∫£i nh·∫Øc nh·ªü khi m·ªü trang
    document.addEventListener('DOMContentLoaded', () => {
      loadReminders();
      renderReminders();
    });

    // Ki·ªÉm tra nh·∫Øc nh·ªü m·ªói gi√¢y
    setInterval(() => {
      const now = new Date();
      const hhmm = now.toTimeString().slice(0,5);
      reminders.forEach((r,i) => {
        if (r.time === hhmm) {
          alert(`üîî Nh·∫Øc nh·ªü: ${r.text}`);
          reminders.splice(i,1);
          saveReminders();
          renderReminders();
        }
      });
    }, 1000);

    // --- M√£ cho ph·∫ßn H·∫πn gi·ªù ---
    let timerInterval = null;
    let elapsed = 0; // t√≠nh b·∫±ng gi√¢y
    const display = document.getElementById('timer-display');
    const startBtn = document.getElementById('start-timer');
    const pauseBtn = document.getElementById('pause-timer');
    const resetBtn = document.getElementById('reset-timer');

    function updateDisplay() {
      const h = String(Math.floor(elapsed/3600)).padStart(2,'0');
      const m = String(Math.floor((elapsed%3600)/60)).padStart(2,'0');
      const s = String(elapsed%60).padStart(2,'0');
      display.textContent = `${h}:${m}:${s}`;
    }

    startBtn.addEventListener('click', () => {
      if (timerInterval) return;
      timerInterval = setInterval(() => {
        elapsed++;
        updateDisplay();
      }, 1000);
    });

    pauseBtn.addEventListener('click', () => {
      clearInterval(timerInterval);
      timerInterval = null;
    });

    resetBtn.addEventListener('click', () => {
      clearInterval(timerInterval);
      timerInterval = null;
      elapsed = 0;
      updateDisplay();
    });
  </script>
</body>
</html>
